<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Process Order - Summary</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Karla:wght@200;300&family=Mulish:wght@200;400&family=PT+Sans&family=Pacifico&family=Shizuru&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="./styles/navbar.css" />
    <link rel="stylesheet" href="./styles/summay.css" />
    <link rel="stylesheet" href="./styles/footer.css" />
  </head>
  <body>
    <!-- navbar -->
    <nav id="navbar"></nav>

    <div id="main">
      <div id="left"></div>

        <div id="right"></div>
    </div>

    <div id="cards">
        <div id="check">
            <input id="check" type="checkbox">
            <span>I ACCEPT THE <u>TERMS OF PURCHASE</u> AND <u>PRIVACY POLICY</u></span>
        </div>
        <div id="pr">
            <div id="price">TOTAL :  <span>2,290.00</span></div>
            <button id="done">CONTINUE</button>
        </div>
    </div>

    <div id="footer"></div>
  </body>
</html>

<script type="module">
  let total = JSON.parse(localStorage.getItem("total"));
  document.getElementById("price").innerHTML = `TOTAL : <span>${total}</span>`;

  import navbar from "./components/navbar.js";
  let nav = document.getElementById("navbar");
  nav.innerHTML = navbar();

    let userData = JSON.parse(localStorage.getItem("userDataBase"));
    let cartItem = JSON.parse(localStorage.getItem("cart"));
    appendUserDetails(userData,cartItem)

    function appendUserDetails(userData,cartItem){
        let data = userData[userData.length-1];
        let leftContainer = document.getElementById("left");
        leftContainer.innerHTML = "";

    leftContainer.innerHTML = `<h4>DELIVERY</h4>
            <div class="space">
                <h5>STANDARD HOME SHIPPING Â· THURSDAY 27, JANUARY - TUESDAY 01, FEBRUARY</h5>
                <p>TRANSPORT RESTRICTIONS MAY APPLY TO SOME AREAS</p>
                <p><u>EDIT</u></p>
            </div>
            <div class="name">
                <p>${data.name}</p>
                <p>${data.address}</p>
                <p>${data.pin}</p>
                <p>${data.state}</p>
                <p>${data.stateR}</p>
                <p>${data.tel}</p>
            </div>
            <h4 style="margin-top: 60px;">PAYMENT</h4>
            <p><u>EDIT</u></p>`


        let rightContainer = document.getElementById("right");
        rightContainer.innerHTML = ""
        rightContainer.innerHTML = `<h4>DELIVERY THURSDAY 27, JANUARY - TUESDAY 01, FEBRUARY</h4>`
        cartItem.forEach(function(elem){
            let div = document.createElement("div");
            div.innerHTML = `<div>
                <p>${elem.qty} ITEM</p>
                <img src=${elem.imgUrl}>
            </div>`
            rightContainer.append(div);
        })

    }

    document.getElementById("done").addEventListener("click",function(){
        alert("THANK YOU FOR CHOOSING US")
        window.location.href = 'index.html'
    })


</script>
