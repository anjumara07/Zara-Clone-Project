<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shopping basket - ZARA India</title>
    <script src="https://kit.fontawesome.com/6fa3bd69d6.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="./styles/shoppingBasket.css">
</head>
<body>
    <nav>
        <div id="logo">
            <img src="https://logodownload.org/wp-content/uploads/2014/05/zara-logo-1.png" alt="zaralogo">
        </div>
        <div id="help">
            <div>ANJUM</div>
            <div>HELP</div>
        </div>
    </nav>

    <!-- <div id="items">
        <p>YOUR BASKET IS EMPTY</p>
    </div> -->

    <div id="bag">
        <h3>SHOPPING BAG</h3>
        <p><span id="cartLen"> </span> ITEM</p>
    </div>
    <div id="items"></div>

    <div id="card">
        <div>
            <div id="price">TOTAL :  <span id="total">2,290.00</span></div>
            <button onclick="window.location.href = 'shipping.html' ">CONTINUE</button>
        </div>
    </div>
</body>
</html>

<script>
// var data = JSON.parse(localStorage.getItem("cartZara")) || [];

var data = [
    {
      imgUrl:
        "https://static.zara.net/photos///2021/I/0/1/p/3717/310/250/602/w/850/3717310250_1_1_1.jpg?ts=1637664032242",
      prod_discount: "55% OFF",
      prod_name: "CONSTRAST PRINT SHIRT",
      strikedOffPrice: "2,990.00",
      price: 1290.00,
    },
    {
      imgUrl:
        "https://static.zara.net/photos///2021/I/0/2/p/8779/401/251/2/w/850/8779401251_1_1_1.jpg?ts=1633506820948",
      prod_discount: "55% OFF",
      prod_name: "CORDUROY POLO SHIRT",
      strikedOffPrice: "2,990.00",
      price: 1290.00,
    },
]


let cart_total = 0
display_product(data);

function display_product(data) {
    document.querySelector('#cartLen').innerHTML = data.length
    cart_total = data.reduce(function (ac, cv) {
        return ac + cv.price;
    }, 0).toFixed(2);

    document.querySelector('#total').innerHTML = cart_total

    document.querySelector("#items").innerHTML = "";

    data.map(function (elem,index) {
        // creating elements and setting attributes

        // main container
        let mainDiv = document.createElement("div");

        // for product image
        let img = document.createElement("img");

        // for product description and name
        let details = document.createElement("div");
        details.setAttribute("class", "desc");
        let name = document.createElement("h5");
        let price = document.createElement("p");
        price.style.textDecoration = "line-through"
        let price2 = document.createElement("p");
        price2.setAttribute("class","yellow")
        let del = document.createElement("div");
        del.addEventListener('click', function(){
            del(index);
        })

        img.src = elem.imgUrl;
        name.innerHTML = elem.prod_name;
        price.innerHTML = "₹"+elem.strikedOffPrice;
        price2.innerHTML = "₹"+elem.price+".00";
        del.innerHTML = `<i class="far fa-trash-alt"></i>`;
        del.style.marginTop = "20px"

        // quantity div
        let quantityMain = document.createElement("div");
        let dec = document.createElement("span");
        // dec.addEventListener('click', decCount)
        let quantity = document.createElement("span");
        let inc = document.createElement("span");
        // inc.addEventListener('click', incCount)

        dec.innerHTML = "-";
        inc.innerHTML = "+";
        quantity.innerHTML = 1;
        quantity.style.margin = "0px 10px 0px 10px";

        // appending the child elements with the parent elements
        quantityMain.append(dec, quantity, inc)
        details.append(name,price,price2,quantityMain,del)
        mainDiv.append(img,details)
        document.querySelector("#items").append(mainDiv);
    });
   
}

function del(index){
    data.splice(index,1);
    // localStorage.setItem("cartZara",JSON.stringify(data));
    // display_product(data);
}

</script>